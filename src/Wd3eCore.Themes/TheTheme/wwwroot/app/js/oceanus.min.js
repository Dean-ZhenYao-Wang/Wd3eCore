function createGantt(e,b){gantt.config.start_date=new Date(1970,0,2,0,0);gantt.config.end_date=new Date(1970,0,2,24,0);gantt.config.date_grid="%H:%i";gantt.config.scale_unit="hour";gantt.config.duration_unit="minute";gantt.config.date_scale="%H:%i";gantt.config.details_on_create=true;gantt.templates.task_class=function(h,f,g){return"owner_"+g.owner};var c={type:"text",map_to:"text"};var d={type:"date",map_to:"start_date",min:new Date()};var a={type:"number",map_to:"duration",min:0,max:100};gantt.config.columns=[{name:"text",label:"任务名称",width:"*",tree:true,editor:c},{name:"start_date",label:"开始时间",align:"center",width:50,editor:d},{name:"end_date",label:"结束时间",align:"center",width:50},{name:"duration",label:"时长",align:"center",width:50,editor:a},{name:"progress",label:"资源",template:function(f){return gantt.getLabel("owner",f.owner)},align:"center",width:70}];gantt.config.grid_width=450;gantt.attachEvent("onTaskCreated",function(f){f.duration=4;f.progress=0.25});gantt.templates.progress_text=function(h,f,g){return"<span>"+Math.round(g.progress*100)+"% </span>"};gantt.locale.labels.section_owner="Owner";gantt.config.lightbox.sections=[{name:"description",height:38,map_to:"text",type:"textarea",focus:true},{name:"owner",height:22,map_to:"owner",type:"select",options:b},{name:"time",type:"duration",map_to:"auto",time_format:["%d","%m","%Y","%H:%i"]}];gantt.init("gantt_here");gantt.parse(e)}function createScheduler(d,a){var b=[];c();scheduler.locale.labels.timeline_tab="Timeline";scheduler.locale.labels.section_custom="Section";scheduler.config.xml_date="%d-%m-%Y %H:%i";scheduler.config.first_hour=0;scheduler.config.last_hour=24;scheduler.config.readonly=true;scheduler.locale.labels.treetimeline_tab="Tree";scheduler.createTimelineView({section_autoheight:false,name:"treetimeline",x_unit:"minute",x_date:"%H:%i",x_step:60,x_size:24,x_start:0,x_length:48,y_unit:a,y_property:"owner",render:"tree",folder_dy:30,dy:60});scheduler.init("scheduler_here",new Date(1970,0,2),"treetimeline");scheduler.parse(b,"json");function c(){for(i in d.data){var e=d.data[i];if(!e.owner){continue}b.push(e)}}scheduler.attachEvent("onSchedulerResize",function(){conflictShow()});scheduler.attachEvent("onDataRender",function(){conflictShow()})}function conflictShow(){for(var d=0;d<$(".dhx_matrix_line").length;d++){if($(".dhx_matrix_line").eq(d).children("div.dhx_cal_event_line ").length>0){var a=$(".dhx_matrix_line").eq(d).children("div.dhx_cal_event_line ").eq(0).css("top");for(var b=1;b<$(".dhx_matrix_line").eq(d).children("div.dhx_cal_event_line ").length;b++){var c=$(".dhx_matrix_line").eq(d).children("div.dhx_cal_event_line ").eq(b).css("top");if(c!==a){$(".dhx_matrix_scell").eq(d).css({backgroundColor:"#ff827f",color:"#535353"});$(".dhx_data_table").eq(d).find("td").css({backgroundColor:"#ff827f",color:"#535353"});break}}}}};